<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.4" />
<title>Soft-typing for PHP5</title>
<style type="text/css">
/* Sans-serif font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
div#toctitle,
span#author, span#revnumber, span#revdate, span#revremark,
div#footer {
  font-family: Arial,Helvetica,sans-serif;
}

/* Serif font. */
div.sectionbody {
  font-family: Georgia,"Times New Roman",Times,serif;
}

/* Monospace font. */
tt {
  font-size: inherit;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  font-size: inherit;
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
}

div#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  div#footer-badges { display: none; }
}

div#toc {
  margin-bottom: 2.5em;
}

div#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes(); asciidoc.toc(2);}
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  var cont = document.getElementById("content");
  var noteholder = document.getElementById("footnotes");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      // Use [\s\S] in place of . so multi-line matches work.
      // Because JavaScript has no s (dotall) regex flag.
      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      spans[i].innerHTML =
        "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
        "' title='View footnote' class='footnote'>" + n + "</a>]";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
}

}
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Soft-typing for PHP5</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Look for the README.html file in the same folder, it contains a more
      readable variant of this text file.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_author">1. Author</h2>
<div class="sectionbody">
<div class="paragraph"><p>Henk Erik van der Hoek - First version (<a href="https://github.com/henkerik/typing">https://github.com/henkerik/typing</a>)</p></div>
<div class="paragraph"><p>Marcelo Sousa &lt;<a href="mailto:dipython@gmail.com">dipython@gmail.com</a>&gt; (<a href="https://github.com/marcelosousa/soft-typing-PHP5">https://github.com/marcelosousa/soft-typing-PHP5</a>)</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Building the HTML version of this document requires <tt>asciidoc</tt> with either
      pygments or gnu source highlight. asciidoc can be easily installed from
      source.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">2. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>This Experimentation Project is related to my MSc. Computing Science
at the University of Utrecht from October 2011 and it&#8217;s based on previous work of
Henk Erik van der Hoek (<a href="https://github.com/henkerik/typing">https://github.com/henkerik/typing</a>).
The goal of this project was to create a useful GUI and to extend the analysis of PHP5 features.
A list of the current working features can be found below.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">3. Requirements</h2>
<div class="sectionbody">
<div class="paragraph"><p>To be able to properly compile and use this tool the following packages must be installed:</p></div>
<div class="ulist"><div class="title">Packages Required</div><ul>
<li>
<p>
Special version of the cco haskell library in lib/
</p>
</li>
<li>
<p>
sglri tool (<a href="http://strategoxt.org/">http://strategoxt.org/</a>)
</p>
</li>
<li>
<p>
Graphviz (<a href="http://www.graphviz.org/">http://www.graphviz.org/</a>)
</p>
</li>
<li>
<p>
asciidoc (to be able to generate the html of this README)
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_installing">4. Installing</h2>
<div class="sectionbody">
<div class="paragraph"><p>The code itself can be compiled with the command:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cabal configure <span style="color: #990000">&amp;&amp;</span> cabal build<span style="color: #990000">.</span></tt></pre></div></div>
<div class="paragraph"><p>or simply:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>make</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">5. Usage</h2>
<div class="sectionbody">
<div class="paragraph"><p>To run the tool use with the command:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>php5analysis -t<span style="color: #990000">=</span>Option inputfile</tt></pre></div></div>
<div class="ulist"><div class="title">Options</div><ul>
<li>
<p>
Parse - Prints the output from the parser sglri.
</p>
</li>
<li>
<p>
Code  - Pretty prints the ast in the form on php code. This component was first implemented by Henk Erik van der Hoek and is not completely up to date. The Analyse option prints the actual file and does not use this component.
</p>
</li>
<li>
<p>
Check - Performs the analysis and generates warnings concerning the assertions specified by the function check. This component was first implemented by Henk Erik van der Hoek and is not completely up to date, although their integration is easy since only warning generation is missing.
</p>
</li>
<li>
<p>
Type - Performs the analysis and prints the lattice for all labels. This information might be hard to grasp if not familiarized with code.
</p>
</li>
<li>
<p>
Flow - Prints the Flow instance for Node and the nodes elements that are used by TreeDot.
</p>
</li>
<li>
<p>
TreeDot - Prints a dot file representing the AST.
</p>
</li>
<li>
<p>
Simplify - Prints the code using Code after simplifying the AST.
</p>
</li>
<li>
<p>
DumpIterations - Dumps all information used by Analyse to build the website. This information are dots files for each iteration of the control flow annotated with the lattice.
</p>
</li>
<li>
<p>
Analyse - Generates a website under the directory of the testfile with the name (testfile ++ "output"). If the website seems broken a possible reason might be that the link to the css and the js script is broken since these are hardcoded for simplicity. Change those links in WebApp/WebApp.hs
</p>
</li>
<li>
<p>
Debug - Prints both Flow and Code.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_the_analysis">6. The analysis</h2>
<div class="sectionbody">
<div class="paragraph"><p>The goal of the analysis is to discover for each program-point which
variables are in scope and what their possible types are at that point.</p></div>
<div class="paragraph"><p>This work follows Henk Erik&#8217;s approach by specifying the
problem as a monotone framework instance for a forward analysis and by solving the instance using a work-list algorithm.
The theory behind monotone frameworks is described in Principles of Program Analysis by Nielson, Nielson &amp; Hankin (NNH).</p></div>
<div class="paragraph"><p>During the execution of each transfer function constraints for the PHP expression at hand are generated,
and the type of an expression is found by resolving these constraints.
This idea was described by Camphuijsen in his thesis "Soft typing and analyses on PHP programs".</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_general_architecture">7. General Architecture</h2>
<div class="sectionbody">
<div class="paragraph"><p>Following Henk&#8217;s work the code base continues to be clearly separated between the monotone framework and a generic work-list algorithm
on one side and the framework instances on the other side.</p></div>
<div class="paragraph"><p>The soft typing analyses contains two distinct phases. In the first phase an instance of the monotone
framework is specified and solved. The result is an IntMap where the key represents the iteration number and the value
a mapping between variable and type set for any given program point.</p></div>
<div class="paragraph"><p>The second phase was split into two variants:</p></div>
<div class="paragraph"><p>a) Henk&#8217;s initial work whereas this result is used to check wether these types match the types
we expect.</p></div>
<div class="paragraph"><p>b) Website containing all relevant information to visualization of the analysis. Particularly important are the annotated control flow graphs where we can view the lattice for each program point.</p></div>
<div class="paragraph"><p>The second process doesn&#8217;t specify or solve a monotone framework instance and could be considered a post processing step.</p></div>
<div class="paragraph"><p>All previous executables were collapsed to options in one executable and also a more refined file structure was created to help code navigation.</p></div>
<div class="paragraph"><p>File Roadmap</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>| File or directory                      | Description                                                           |
|:---------------------------------------|:----------------------------------------------------------------------|
| src/grammar                            | sglri php5 definitions (very sensitive)                               |
| src/MF/Core                            | Modules related to the Monotone Framework                             |
| src/MF/Core/Solver.hs                  | Implements the work-list algorithm ('solve' function)                 |
| src/MF/Language/PHP/AG/Base.ag         | Defines the Node data and also the parser ATerm to Node               |
| src/MF/Language/PHP/AG/Flow.ag         | Implements the conversion of an AST to a flow graph                   |
| src/MF/Language/PHP/AG/Typing.ag       | Implements the constraint generation, the transfer function and       |
|                                        | specifies an instance of the monotone framework                       |
| src/MF/Language/PHP/AG/Checking.ag     | Implements the expected constraint generation and generates warnings  |
|                                        | when the expected constraints don't match the types found by running  |
|                                        | the work-list algorithm.     (not up to date)                         |
| src/MF/Language/PHP/Types.hs           | Contains the Type Universe for PHP and function 'updateMapping' which |
|                                        | is very important for inter procedural analysis.                      |
| src/MF/Analyses                        | Contains other unfinished analyses                                    |
| src/Tester.hs                          | Test suite executable not up to date                                  |
| src/WebApp                             | Website generation                                                    |
| src/Main.hs                            | Main module                                                           |
|----------------------------------------------------------------------------------------------------------------|</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_supported_php5_features">8. Supported PHP5 Features</h2>
<div class="sectionbody">
<div class="paragraph"><p>By supported I consider usable with option <em>Analyse</em>.</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Comments in the sense that they are removed by sglri (tests/syntax/comment.php)
</p>
</li>
<li>
<p>
Simple assignments (tests/simple.php)&#8201;&#8212;&#8201;Should we add contexts?
</p>
</li>
<li>
<p>
If-constructs with no else clauses (tests/controlstruct/if.php)
</p>
</li>
<li>
<p>
Ifelse constructs (tests/controlstruct/ifelse.php)
</p>
</li>
<li>
<p>
Double quoted strings (tests/basicdatatypes/scalar/string/doublequoted.php)
</p>
</li>
<li>
<p>
Strings with escapes characters (tests/basicdatatypes/scalar/string/doublequoted.php)
</p>
</li>
<li>
<p>
Simple interprocedural analysis (tests/functions/id.php, tests/functions/id2.php)
</p>
</li>
<li>
<p>
While-construct (tests/controlstruct/while.php)
</p>
</li>
<li>
<p>
Booleans (tests/basicdatatypes/scalar/boolean/boolean.php)
</p>
</li>
<li>
<p>
User-defined functions without parameters (tests/functions/simple.php)
</p>
</li>
<li>
<p>
Return statement (tests/functions/simple.php)
</p>
</li>
<li>
<p>
Recursive functions (tests/functions/fac.php, tests/functions/recursive.php)
</p>
</li>
<li>
<p>
Print function (tests/print.php)
</p>
</li>
<li>
<p>
Echo function (tests/echo.php) - Missing case when echo receives something that not a string as input.
</p>
</li>
<li>
<p>
Incrementing/Decrementing Operators (tests/preposincrement.php tests/preposdecrement.php)
</p>
</li>
<li>
<p>
Assignment operators (Arithmetic, String and Bitwise) (tests/assignop.php)
</p>
</li>
<li>
<p>
Comparison Operators (tests/basicdatatypes/scalar/boolean/boolop.php)
</p>
</li>
<li>
<p>
Logical Operators (tests/basicdatatypes/scalar/boolean/logicop.php)
</p>
</li>
<li>
<p>
Supports HTML Embedding (tests/syntax/htmlembedding.php)
</p>
</li>
<li>
<p>
InlineHTML implemented (tests/syntax/advancedescaping.php)
</p>
</li>
<li>
<p>
Standard tags (tests/syntax/phptagsimple.php)
</p>
</li>
<li>
<p>
ASP tags (tests/syntax/phptagasp.php)
</p>
</li>
<li>
<p>
"In PHP 5.2 and earlier, the parser does not allow the &lt;?php opening tag to be the only thing in a file. This is allowed as of PHP 5.3." (tests/syntax/phptagstandard.php)
</p>
</li>
<li>
<p>
Circular functions (tests/functions/recursive2.php)
</p>
</li>
<li>
<p>
Else-if (tests/controlstruct/elseif.php)
</p>
</li>
<li>
<p>
AltIf, AltIfElse (tests/controlstruct/ifelsealt.php)
</p>
</li>
<li>
<p>
AltWhile (tests/controlstruct/while3.php)
</p>
</li>
<li>
<p>
Ternary conditional operator (tests/ternaryconditionalop.php)
</p>
</li>
<li>
<p>
Creating/modifying with square bracket syntax
</p>
</li>
<li>
<p>
ReferenceAssign (tests/variables/varreference.php)
</p>
</li>
<li>
<p>
IndirectReference (tests/variables/indirectrefvar.php)
</p>
</li>
<li>
<p>
ParameterReference (tests/assign.php)
</p>
</li>
<li>
<p>
SingleQuoted strings (tests/basicsdatatypes/scalar/string/singlequoted.php)
</p>
</li>
<li>
<p>
Negative integers not implemented (tests/basicdatatypes/scalar/integer/integerliteral.php)
</p>
</li>
<li>
<p>
Octal integers not implemented (tests/basicdatatypes/scalar/integer/integerliteral.php)
</p>
</li>
<li>
<p>
Hexa integers not implemented (tests/basicdatatypes/scalar/integer/integerliteral.php)
</p>
</li>
<li>
<p>
Floating-point types (tests/basicdatatypes/scalar/float/*)
</p>
</li>
<li>
<p>
NULL type (tests/basicdatatypes/null.php)
</p>
</li>
<li>
<p>
StringAccess (tests/basicdatatypes/scalar/string/stringindex.php)
</p>
</li>
<li>
<p>
None (tests/basicdatatypes/compound/array/arraycreation3.php)
</p>
</li>
<li>
<p>
Standard array creation (tests/basicdatatypes/compound/array/arraycreation*.php) (check nesting)
</p>
</li>
<li>
<p>
Assignments in conditions (tests/controlstruct/conditional.php)
</p>
</li>
<li>
<p>
DoWhile (tests/controlstruct/dowhile.php, tests/controlstruct/dowhilebreak.php)
</p>
</li>
<li>
<p>
Break for while and dowhile (tests/controlstruct/whilebreak.php)
</p>
</li>
<li>
<p>
Continue (tests/controlstruct/whilecontinue.php)
</p>
</li>
<li>
<p>
For (tests/controlstruct/for.php)
</p>
</li>
<li>
<p>
function with array as parameter (tests/functions/funtakesarray.php)
</p>
</li>
<li>
<p>
function within a function (tests/functions/funfun.php)
</p>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_non_supported_php5_features">9. Non-Supported PHP5 features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_parser">9.1. Parser</h3>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
sglri does not allow combination of different sytles of open-close tags (tests/syntax/phptagcombination.php)
</p>
</li>
<li>
<p>
sglri seems to now allow lambdas                                        (tests/basicsdatatypes/callback/callbackclosure.php, tests/functions/lambda.php)
</p>
</li>
<li>
<p>
sglri does not support Goto                                             (tests/controlstruct/goto.php)
</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_various">9.2. Various</h3>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
TemplateDocument                           (tests/syntax/phptagecho.php, tests/syntax/phptagscript.php)
</p>
</li>
<li>
<p>
Different code snippets in the same file   (tests/syntax/instructionseparation.php)
</p>
</li>
<li>
<p>
Exceptions                                 (tests/exceptions/*)
</p>
</li>
<li>
<p>
Classes and Objects                        (tests/oo/, tests/basicdatatypes/compound/object/*)
</p>
</li>
<li>
<p>
Resources                                  (no test file)
</p>
</li>
<li>
<p>
Callback                                   (tests/basicdatatypes/callback/callback.php)
</p>
</li>
<li>
<p>
Heredoc                                    (tests/basicsdatatypes/scalar/string/heredoc.php)
</p>
</li>
<li>
<p>
Nowdoc                                     (tests/basicsdatatypes/scalar/string/nowdoc.php)
</p>
</li>
<li>
<p>
Type Juggling                              (tests/basicdatatypes/typejuggling.php)
</p>
</li>
<li>
<p>
InternalFunction                          (tests/variables/varmanage/isset.php, tests/varmanage/empty.php, tests/include.php)
</p>
</li>
<li>
<p>
Unset                                     (tests/variables/varmanage/unset.php)
</p>
</li>
<li>
<p>
Use of $GLOBALS and variable scope        (tests/variables/varscope/globals*)
</p>
</li>
<li>
<p>
Superglobals                              (no test file)
</p>
</li>
<li>
<p>
DeclareGlobal                             (tests/variables/varscope/global.php)
</p>
</li>
<li>
<p>
define function for constants             (tests/variables/constantvar2.php)
</p>
</li>
<li>
<p>
Constant variables                        (tests/constantvar.php)
</p>
</li>
<li>
<p>
DeclareStatic not implemented             (tests/varscope/static.php)
</p>
</li>
<li>
<p>
Recursive functions with static variables (tests/functions/countTo10.php)
</p>
</li>
<li>
<p>
Short-circuiting                          (no test file)
</p>
</li>
<li>
<p>
Declare                                   (tests/declare.php)
</p>
</li>
<li>
<p>
ListAssign                                (tests/controlstruct/whilebreak.php)
</p>
</li>
<li>
<p>
Foreach                                   (tests/controlstruct/foreach.php)
</p>
</li>
<li>
<p>
Switch                                    (tests/controlstruct/switch.php)
</p>
</li>
<li>
<p>
FunctionDeclRef                           (tests/functions/funretref.php)
</p>
</li>
<li>
<p>
function with default parameter           (tests/functions/fundefaultpar.php)
</p>
</li>
<li>
<p>
conditional functions                     (tests/functions/funconditional.php)
</p>
</li>
</ol></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notes_on_the_language">10. Notes on the language</h2>
<div class="sectionbody">
<div class="ulist"><div class="title">Useful functions</div><ul>
<li>
<p>
varmanage functions (tests/varmanage/*)
</p>
</li>
<li>
<p>
var_dump (tests/basicdatatypes/scalar/boolean/boolcheck.php)
</p>
</li>
<li>
<p>
gettype  (tests/basicdatatypes/gettype.php)
</p>
</li>
<li>
<p>
error_reporting(E_ALL);
</p>
</li>
<li>
<p>
ini_set(<em>display_errors</em>, true);
</p>
</li>
<li>
<p>
ini_set(<em>html_errors</em>, false);
</p>
</li>
<li>
<p>
settype()
</p>
</li>
<li>
<p>
function_exists()
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_notes_for_new_developers">11. Notes for new developers</h2>
<div class="sectionbody">
<div class="ulist"><div class="title">The typical procedure to implement a new feature is</div><ul>
<li>
<p>
New constructor to <em>Node</em> in Base.ag
</p>
</li>
<li>
<p>
New production to <em>toTree</em> in Base.ag
</p>
</li>
<li>
<p>
Probably rules for all attributes in Flow.ag
</p>
</li>
<li>
<p>
Debug with option Flow and check new control flow
</p>
</li>
<li>
<p>
Add new constraints and (possibly new transfer function) in Typing.ag
</p>
</li>
<li>
<p>
Debug with option Type
</p>
</li>
<li>
<p>
Support for PP/PPcfg.ag and PP/PPast.ag
</p>
</li>
<li>
<p>
Run with option Analyse
</p>
</li>
</ul></div>
<div class="paragraph"><p>Sometimes it&#8217;s difficult to know how PHP works under the hoods.
I used the <strong>Vulcan Logic Dumper</strong> has a debugger and it was quite helpful.</p></div>
<div class="ulist"><div class="title">Vulcan Logic Dumper related links</div><ul>
<li>
<p>
<a href="http://fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster">http://fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster</a>
</p>
</li>
<li>
<p>
<a href="http://derickrethans.nl/projects.html#vld">http://derickrethans.nl/projects.html#vld</a>
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-02-16 21:09:10 EET
</div>
</div>
</body>
</html>
